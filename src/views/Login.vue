<template>
  <div class="login">
    <div class="logo">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="214.786"
        height="69.282"
        viewBox="0 0 214.786 69.282"
        class="logo-svg"
      >
        <g transform="translate(-17.887 -1.272)">
          <g transform="translate(108.55 21.781)">
            <path
              class="a"
              d="M98.6,23.516q-.065-4.344-2.566-6.112A11.029,11.029,0,0,0,89.367,15.7H80.8V42.463h4.137V31.583h4.885a9.684,9.684,0,0,0,6.4-1.862q2.326-1.9,2.37-6.206Zm-4.221,0q-.03,2.8-1.34,3.867A5.25,5.25,0,0,1,89.492,28.4H84.939V18.882h4.346a6.164,6.164,0,0,1,3.617.827q1.424.911,1.474,3.8Zm33.88,18.947L118.157,15.7h-3.643L103.63,42.463h4.346l2.814-7.57h10.264l2.649,7.57Zm-8.236-10.674h-8.071L116.129,20.5Zm32.851-8.274q-.065-4.344-2.566-6.112a11.029,11.029,0,0,0-6.663-1.707h-8.567V42.463h4.139V31.583H144.1a9.681,9.681,0,0,0,6.4-1.862q2.326-1.9,2.37-6.206Zm-4.221,0q-.03,2.8-1.34,3.867a5.251,5.251,0,0,1-3.544,1.014h-4.553V18.882h4.346a6.163,6.163,0,0,1,3.617.827q1.424.911,1.474,3.8Zm27.672,18.947V39.277H164.733v-9.06H175.08V27.031H164.732V18.882h11.217V15.7H160.593V42.463Zm28.6,0L196.189,30.8q3.978-.477,5.578-2.617a7.887,7.887,0,0,0,1.541-5.037q-.152-4.375-2.809-5.956a10.886,10.886,0,0,0-6.007-1.49h-9.186V42.463h4.137V30.92h1.946l8.525,11.543Zm-5.836-19.32a5,5,0,0,1-.994,3.274,4.14,4.14,0,0,1-3.352,1.319h-5.3V18.882H194.7A4.488,4.488,0,0,1,197.982,20a4.257,4.257,0,0,1,1.107,3.139Z"
              transform="translate(-80.8 -15.691)"
            />
          </g>
          <g transform="translate(18.673 2.058)">
            <ellipse
              class="b"
              cx="33.872"
              cy="33.855"
              rx="33.872"
              ry="33.855"
            />
            <g transform="translate(16.547 13.297)">
              <path
                class="c"
                d="M-56.867,88.56a24.613,24.613,0,0,1-9.046-19.293,18.605,18.605,0,0,1,2.056-8.617,12.6,12.6,0,0,1,6.337-5.818,10.591,10.591,0,0,1,9.258.824,10.077,10.077,0,0,1,3.38,3.4,9.871,9.871,0,0,1,1.394,4.612,10.877,10.877,0,0,1-3.618,8.269,13.478,13.478,0,0,1-8.65,3.344,14.437,14.437,0,0,1-10.187-3.795,12.985,12.985,0,0,1-4.077-10.029,12.853,12.853,0,0,1,1.832-5.9,14.258,14.258,0,0,1,4.328-4.495,17.054,17.054,0,0,1,12.153-2.329,19.527,19.527,0,0,1,13.428,9.459,19.606,19.606,0,0,0-13.4-9.616,17.3,17.3,0,0,0-12.355,2.218A14.655,14.655,0,0,0-68.6,55.3a13.414,13.414,0,0,0-2.062,6.113,13.7,13.7,0,0,0,4.163,10.648,15.313,15.313,0,0,0,10.757,4.175,14.518,14.518,0,0,0,9.377-3.469,12.075,12.075,0,0,0,4.15-9.138,11.23,11.23,0,0,0-1.427-5.295,11.593,11.593,0,0,0-3.77-4.027,12.268,12.268,0,0,0-10.735-1.117,14.428,14.428,0,0,0-7.393,6.535,20.584,20.584,0,0,0-2.454,9.5A26.768,26.768,0,0,0-58.274,90.3Z"
                transform="translate(70.689 -48.262)"
              />
              <path
                class="d"
                d="M-35.2,57.822-45.49,60.035l-2.15-4.492Zm-12.545-2.214-2.019,3.451,3.387-.521Zm-.127-.456-2-3.21L-35.2,57.756Z"
                transform="translate(79.988 -46.618)"
              />
            </g>
            <path
              class="e"
              d="M-68.817,63.9a5.534,5.534,0,0,0,2.3,2.462l-.132-1.184c-.711-.94-1.15-1.214-1.614-1.912-.119-.19-.538-.671-.538-.671a3.682,3.682,0,0,0-.02,1.3Z"
              transform="translate(88.048 -28.56)"
            />
          </g>
        </g>
      </svg>
    </div>
    <div class="login__body">
      <div class="title">
        Masuk ke Paper.id
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="31.008"
          height="33.15"
          viewBox="0 0 31.008 33.15"
          class="tutorial-svg"
        >
          <g transform="translate(0.002)">
            <path
              class="a"
              d="M15.5,32.15S30.75,30.122,29.976,7.137c0,0-2.428-3.095-14.474-6.137C3.455,4.042,1.027,7.137,1.027,7.137.253,30.109,15.5,32.15,15.5,32.15Z"
              transform="translate(0)"
            />
            <path
              class="b"
              d="M15.5,32.15S30.75,30.122,29.976,7.137c0,0-2.428-3.095-14.474-6.137C3.455,4.042,1.027,7.137,1.027,7.137.253,30.109,15.5,32.15,15.5,32.15Z"
              transform="translate(0)"
            />
            <path
              class="c"
              d="M15.5,32.15S.253,30.122,1.027,7.137c0,0,2.428-3.095,14.474-6.137C27.548,4.042,29.976,7.137,29.976,7.137,30.75,30.109,15.5,32.15,15.5,32.15Z"
              transform="translate(0)"
            />
            <path
              class="a"
              d="M15.488,1V32.15S.253,30.122,1.027,7.137c0-.013,2.441-3.108,14.461-6.137Z"
              transform="translate(0)"
            />
            <path
              class="c"
              d="M8.07,13.655l3.122,3.122L18.209,9.76"
              transform="translate(2.362 2.926)"
            />
          </g>
        </svg>
      </div>

      <div class="line-title"></div>
      <div class="subtitle">
        Masuk dengan akun yang terdaftar di Paper.id/PayPer
      </div>
      <form @submit.prevent="onLogin" class="form">
        <div class="form__text">
          <div class="d-flex">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="19.425"
              height="23.385"
              viewBox="0 0 19.425 23.385"
              class="account-svg mr-2"
            >
              <g transform="translate(0.62 0.602)">
                <path
                  class="a"
                  d="M17.352,10.886a5.165,5.165,0,0,1-1.962.621c-2.1.117-3.673-.671-5.937.1S6.1,15.1,1.789,14.24A4.31,4.31,0,0,1,.38,13.7v-.721a4.729,4.729,0,0,1,.252-1.543A4.662,4.662,0,0,1,5.042,8.32h8.117a4.562,4.562,0,0,1,3.354,1.459A3.773,3.773,0,0,1,17.352,10.886Z"
                  transform="translate(0 5.363)"
                />
                <path
                  class="b"
                  d="M10.929,16.42H.38V12.982a4.729,4.729,0,0,1,.252-1.543A4.679,4.679,0,0,1,5.059,8.32h8.1a4.562,4.562,0,0,1,3.354,1.459,3.824,3.824,0,0,1,.788,1.107,4.6,4.6,0,0,1,.5,2.1V16.42H15.591"
                  transform="translate(0 5.363)"
                />
                <path
                  class="c"
                  d="M11.122,5.529a4.646,4.646,0,0,1-7.882,0,4.629,4.629,0,0,1,7.882,0Z"
                  transform="translate(1.936 1.983)"
                />
                <path
                  class="b"
                  d="M12.151,5.029a4.5,4.5,0,0,1-.738,2.482,4.646,4.646,0,0,1-7.882,0A4.528,4.528,0,0,1,2.81,5.029a4.344,4.344,0,0,1,.453-1.945,4.662,4.662,0,0,1,8.553.252,4.528,4.528,0,0,1,.335,1.694Z"
                  transform="translate(1.645)"
                />
              </g>
            </svg>
            Email
          </div>
          <input
            class="form__text__input"
            id="input-email"
            v-model="email"
            required
          />
        </div>
        <div class="form__text mt-3">
          <div class="d-flex">
            <svg
              class="lock-svg mr-2"
              xmlns="http://www.w3.org/2000/svg"
              width="20.857"
              height="25.41"
              viewBox="0 0 20.857 25.41"
            >
              <g transform="translate(0.62 0.885)">
                <path
                  class="a"
                  d="M2.813,8.426V5.843a5.352,5.352,0,1,1,10.686,0v2.5"
                  transform="translate(1.643 0)"
                />
                <path
                  class="b"
                  d="M18.683,16.687a3.2,3.2,0,0,1-2.651,1.392H3.584a3.2,3.2,0,0,1-3.2-3.221V8.685a8.17,8.17,0,0,1,6.476.47,17.514,17.514,0,0,0,4.01,2.3c2.063.554,4.261-.923,6.71,1.845a4.848,4.848,0,0,1,1.107,3.389Z"
                  transform="translate(0 5.445)"
                />
                <circle
                  class="c"
                  cx="2.097"
                  cy="2.097"
                  r="2.097"
                  transform="translate(7.711 11.999)"
                />
                <path
                  class="a"
                  d="M9.808,10.75v5.905m9.428-4.11v4.412a3.187,3.187,0,0,1-3.2,3.221H3.584a3.2,3.2,0,0,1-3.2-3.221V8.351a3.221,3.221,0,0,1,3.2-3.221H16.032a3.221,3.221,0,0,1,3.2,3.221"
                  transform="translate(0 3.346)"
                />
              </g>
            </svg>
            Kata Sandi
          </div>
          <input
            type="password"
            class="form__text__input"
            id="input-password"
            v-model="password"
            required
          />
        </div>

        <div class="footer">
          <div v-if="isLoginFailed" class="feedback-login">
            {{ feedback }}
          </div>
          <button
            class="btn btn-primary btn-submit"
            :disabled="isDisabled"
            type="submit"
          >
            Masuk
          </button>
        </div>
      </form>
    </div>
  </div>
</template>

<script>
import { mapActions } from "vuex";
export default {
  name: "SignIn",
  data() {
    return {
      email: "",
      password: "",
      feedback: "",
      isLoginFailed: false
    };
  },
  computed: {
    isDisabled() {
      return this.email === "" || this.password === "";
    }
  },
  methods: {
    ...mapActions("user", ["login"]),
    onLogin() {
      const payload = {
        username: this.email,
        password: this.password
      };
      this.login(payload).then(response => {
        console.log(status);
        if (response.status === 200) {
          this.$router.push({ path: `/` });
        } else {
          this.isLoginFailed = true;
          this.feedback = response.data.message;
        }
      });
    }
  }
};
</script>

<style lang="scss" scoped>
.login {
  height: 100vh;
  color: white;
  background-color: #3b7fba;
  background-image: url("~@/assets/backgroundLogin.png");
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  overflow: hidden;
  &__body {
    width: fit-content;
    margin-left: 10%;
    text-align: left;
    .title {
      font-size: 55px;
      text-align: center;
    }
    .line-title {
      background-color: white;
      width: 50px;
      height: 5px;
      margin: 10px auto;
    }
    .subtitle {
      text-align: center;
    }
  }
  &__reset {
    color: #0089de;
    font-weight: 700;
    font-size: 0.8rem;
    margin-bottom: 10px;
    text-decoration-line: underline;
  }
  .btn-primary:disabled {
    background-color: #c7c7c7;
    border-color: #c7c7c7;
  }
}

.form {
  margin-top: 20px;
  &__text {
    &__input {
      margin-top: 5px;
      border-top: 0;
      border-left: 0;
      border-right: 0;
      border-bottom: 1px solid rgba(147, 190, 220, 0.5);
      padding-bottom: 5px;
      width: 100%;
      background-color: transparent;
      color: #fff;
      text-align: left;
      -webkit-appearance: none;
    }
  }
  .btn-submit {
    margin-top: 20px;
    width: 100%;
    height: 50px;
    border-radius: 25px;
    background-color: #afe47c;
  }
  .feedback-login {
    margin-top: 20px;
    margin-left: 10px;
    color: #960e0e;
  }
}

.logo {
  text-align: right;
  margin: 1.5% 5%;
}
</style>
